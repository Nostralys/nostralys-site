---
import { Image } from "astro:assets";
import type { InferEntrySchema } from "astro:content";

import StoneButton from "@components/StoneButton.astro";

interface Classes {
  root?: string;
}

interface Props {
  classes?: Classes;
  id: string;
  post: InferEntrySchema<"news">;
}

const { classes, id, post } = Astro.props;
---

<article
  class:list={[
    "h-2/3 basis-1/3 bg-white relative flex flex-col bg-parchment rounded",
    classes?.root,
  ]}
>
  <Image
    src={post.image.src}
    alt={post.image.alt}
    class="w-full h-1/2 object-cover rounded-t"
    width="500"
    height="500"
  />

  <div class="flex flex-col gap-4 p-2 grow">
    <h1>{post.title}</h1>

    <h3>
      {
        post.publishDate.toLocaleDateString("fr-FR", {
          day: "numeric",
          month: "long",
          year: "numeric",
        })
      }
    </h3>

    <p class="h-2/4">{post.description}</p>
  </div>

  <StoneButton
    class="absolute bottom-0 left-1/2 translate-y-1/2 -translate-x-1/2 hover:scale-110 transition-transform"
    link={`/news/${id}`}
    label="Voir plus"
  />
</article>
